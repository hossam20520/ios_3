{"version":3,"sources":["./src/app/user/forgot/forgot-routing.module.ts","./src/app/user/forgot/forgot.module.ts","./src/app/user/forgot/forgot.page.ts","./src/app/user/forgot/forgot.page.scss","./src/app/user/forgot/forgot.page.html"],"names":[],"mappings":"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","file":"src_app_user_forgot_forgot_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ForgotPage } from './forgot.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ForgotPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ForgotPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ForgotPageRoutingModule } from './forgot-routing.module';\n\nimport { ForgotPage } from './forgot.page';\n\nimport { TranslateModule } from '@ngx-translate/core';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    ForgotPageRoutingModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [ForgotPage]\n})\nexport class ForgotPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\n\nimport { FormAssistantService } from '../../serv/form-asistant.service';\nimport { AuthService } from '../../serv/auth.service';\nimport { GeneralService } from '../../serv/general.service';\n\n@Component({\n  selector: 'app-forgot',\n  templateUrl: './forgot.page.html',\n  styleUrls: ['./forgot.page.scss'],\n})\nexport class ForgotPage implements OnInit {\n  public password_type: string = 'password';\n  public credentialsForm: FormGroup;\n  public credentialsForm_2: FormGroup;\n  public formStep = 1;\n  public username='';\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private cValid:FormAssistantService,\n    private auth:AuthService,\n    public GeneralService:GeneralService\n  ) { }\n\n  ngOnInit() {\n    this.credentialsForm = this.formBuilder.group({\n      username: ['', this.cValid.validByT('username')]\n    });\n    this.credentialsForm_2 = this.formBuilder.group({\n      username: ['', this.cValid.validByT('username')],\n      active_code: ['', this.cValid.validByT('forgot_code')],\n      password: ['', this.cValid.validByT('password')]\n    });\n  }\n\n async onSubmitUserData($step) {\n   this.GeneralService.loadingPanel('open');\n\n\n    if($step == 'step1') {\n      let result =  await this.auth.sendPassActiveCode(this.credentialsForm.value);\n      this.GeneralService.loadingPanel('close');\n\n      if(result.st == 'done'){\n        this.formStep = 2;\n        this.username = this.credentialsForm.value.username;\n      }\n    }\n\n    if($step == 'step2') {\n      let result =  await this.auth.changePassword(this.credentialsForm_2.value);\n      this.GeneralService.loadingPanel('close');\n\n      if(result.st == 'done'){\n        this.formStep = 1;\n        this.auth.login({\n          'username':this.username,\n          'password':this.credentialsForm_2.value.password\n        });\n      }\n      \n\n      \n    }\n  }\n\n\n  public togglePasswordMode() {\n    this.password_type = this.password_type === 'text' ? 'password' : 'text';\n  }\n\n  toggleFormHaveCode(){\n    this.formStep = 21;\n  }\n}\n","export default \".iconx-co {\\n  font-size: 6rem;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcmdvdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxlQUFBO0FBQ0oiLCJmaWxlIjoiZm9yZ290LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pY29ueC1jbyB7XG4gICAgZm9udC1zaXplOiA2cmVtO1xufSJdfQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"login\\\" routerDirection=\\\"backward\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{ 'P_TITLES.forgot' | translate }}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <div class=\\\"iconx-co ion-text-center ion-padding ion-margin-bottom\\\">\\n    <ion-icon src=\\\"assets/icon/forgot.svg\\\"></ion-icon>\\n  </div>\\n\\n  <form class=\\\"step1\\\" *ngIf=\\\"formStep == 1\\\" [formGroup]=\\\"credentialsForm\\\" (ngSubmit)=\\\"onSubmitUserData('step1')\\\">\\n    <ion-item class=\\\"ion-margin-bottom ion-no-padding\\\">\\n      <div tabindex=\\\"0\\\"></div>\\n      <ion-icon color=\\\"primary\\\" name=\\\"person-outline\\\"></ion-icon>\\n      <ion-input name=\\\"username\\\" type=\\\"text\\\" formControlName=\\\"username\\\" placeholder=\\\"{{ 'LOGIN.username' | translate }}\\\"></ion-input>      \\n    </ion-item>\\n    <div class=\\\"ion-text-center\\\">\\n      <ion-button type=\\\"submit\\\" [disabled]=\\\"!credentialsForm.valid\\\">\\n        {{ 'GENERAL.send' | translate }}\\n      </ion-button>\\n    </div>\\n\\n    <p (click)=\\\"toggleFormHaveCode()\\\" class=\\\"ion-text-center\\\">{{ 'LOGIN.haveCode' | translate }}</p>\\n  </form>\\n\\n\\n  <form class=\\\"step2\\\" *ngIf=\\\"formStep == 2 || formStep == 21\\\" [formGroup]=\\\"credentialsForm_2\\\" (ngSubmit)=\\\"onSubmitUserData('step2')\\\">\\n    <ion-item class=\\\"ion-margin-bottom ion-no-padding\\\">\\n      <div tabindex=\\\"0\\\"></div>\\n      <ion-icon color=\\\"primary\\\" name=\\\"person-outline\\\"></ion-icon>\\n      <ion-input [ngModel]=\\\"username\\\" type=\\\"text\\\" formControlName=\\\"username\\\" placeholder=\\\"{{ 'LOGIN.username' | translate }}\\\"></ion-input>      \\n    </ion-item>\\n    <ion-item class=\\\"ion-margin-bottom ion-no-padding\\\">\\n      <div tabindex=\\\"0\\\"></div>\\n      <ion-icon color=\\\"primary\\\" name=\\\"barcode-outline\\\"></ion-icon>\\n      <ion-input type=\\\"text\\\" name=\\\"active_code\\\" formControlName=\\\"active_code\\\" autocomplete=\\\"off\\\" placeholder=\\\"{{ 'LOGIN.code' | translate }}\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item class=\\\"ion-margin-bottom ion-no-padding\\\">\\n      <div tabindex=\\\"0\\\"></div>\\n      <ion-icon color=\\\"primary\\\" name=\\\"lock-closed-outline\\\"></ion-icon>\\n      <ion-input [type]=\\\"password_type\\\" name=\\\"new-password\\\" formControlName=\\\"password\\\" autocomplete=\\\"new-password\\\" placeholder=\\\"{{ 'LOGIN.password' | translate }}\\\"></ion-input>\\n      <ion-icon name=\\\"eye\\\" item-right (click)=\\\"togglePasswordMode()\\\"></ion-icon> \\n      \\n    </ion-item>\\n\\n    <div class=\\\"ion-text-center\\\">\\n      <ion-button type=\\\"submit\\\" [disabled]=\\\"!credentialsForm_2.valid\\\">\\n        {{ 'GENERAL.change' | translate }}\\n      </ion-button>\\n    </div>\\n  </form>\\n\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}