{"version":3,"sources":["./node_modules/@capacitor-community/contacts/dist/esm/definitions.js","./node_modules/@capacitor-community/contacts/dist/esm/index.js","./src/app/points/add-friends/add-friends-routing.module.ts","./src/app/points/add-friends/add-friends.module.ts","./src/app/points/add-friends/add-friends.page.ts","./src/app/points/add-friends/add-friends.page.scss","./src/app/points/add-friends/add-friends.page.html"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,CAAC,kCAAkC;AACnC,uC;;;;;;;;;;;;;;;;;;ACViD;AACjD,iBAAiB,+DAAc;AAC/B,eAAe,yKAAe;AAC9B,CAAC;AAC6B;AACV;AACpB,iC;;;;;;;;;;;;;;;;;;;;ACNyC;AACc;AAEH;AAEpD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,6DAAc;KAC1B;CACF,CAAC;IAMW,2BAA2B,SAA3B,2BAA2B;CAAG;AAA9B,2BAA2B;IAJvC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,2BAA2B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;AChBC;AACM;AACF;AAEA;AAE8B;AAEvB;AAEE;IAWzC,oBAAoB,SAApB,oBAAoB;CAAG;AAAvB,oBAAoB;IAVhC,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,oFAA2B;YAC3B,yEAAwB,EAAE;SAC3B;QACD,YAAY,EAAE,CAAC,6DAAc,CAAC;KAC/B,CAAC;GACW,oBAAoB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBiB;AACT;AAEmB;AAE5D;;;EAGE;AACuC;AAEgB;IAO5C,cAAc,SAAd,cAAc;IAMzB,YACS,cAA6B,EAC5B,MAAc;QADf,mBAAc,GAAd,cAAc,CAAe;QAC5B,WAAM,GAAN,MAAM,CAAQ;QAPxB,aAAQ,GAAG,IAAI,CAAC;QAGhB,oBAAe,GAAC,EAAE,CAAC;QACnB,kBAAa,GAAE,EAAE,CAAC;QAKhB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAC,CAAC,EAAC,EAAE,EAAC,CAAC,CAAC;QACtD;;;;;;;;;;;;;;;;;;;;;;;;;;;UA2BE;IACJ,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAEK,YAAY;;YAChB,IAAG,uDAAU,CAAC,SAAS,CAAC,EAAC;gBACvB,IAAI,UAAU,GAAG,MAAM,kFAAuB,EAAE,CAAC;gBACjD,IAAG,CAAC,UAAU,CAAC,OAAO,EAAE;oBACtB,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,gDAAgD,CAAC,CAAC;oBACnF,OAAO;iBACR;aACF;YACD,+EAAoB,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;gBACnC,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,QAAQ,CAAC;gBACrC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACxB,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAED,YAAY,CAAC,EAAe;QAC1B,MAAM,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC;QAE5B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;YACpD,IAAG,GAAG,CAAC,IAAI,EAAE,EAAC;gBACZ,MAAM,UAAU,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC7G,MAAM,eAAe,GAAG,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;gBACnG,IAAI,CAAC,IAAI,GAAG,CAAC,UAAU,IAAI,eAAe,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAE;aAC7D;iBACI;gBACH,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC;aACnB;YACD,OAAO,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,YAAY,CAAC,CAAC,EAAE,IAAI;QACpB,IAAI,CAAC,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,EAAE;YAE7B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC9B;aAAM;YACN,IAAI,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,UAAS,EAAE;gBACvD,OAAO,EAAE,CAAC,WAAW,KAAK,IAAI,CAAC,WAAW,CAAC;YAC3C,CAAC,CAAC,CAAC;YACF,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC;SACjC;IAEH,CAAC;IAGM,aAAa;;YACjB,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,CAAC;YACnC,MAAM,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,UAAU,CAAC,oBAAoB,EAAE,EAAC,OAAO,EAAC,IAAI,CAAC,eAAe,EAAC,CAAC,CAAC,IAAI,CACjG,CAAC,IAAI,EAAE,EAAE;;gBACP,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBAC1C,IAAI,OAAO,GAAC,EAAE,CAAC;gBAEf,IAAG,UAAI,CAAC,MAAM,CAAC,0CAAE,MAAM,EAAE;oBACvB,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE;wBACrC,OAAO,GAAG,OAAO,GAAG,MAAM,GAAG,GAAG,CAAC,KAAK,GAAG,yBAAyB,GAAG,GAAG,CAAC,SAAS,GAAE,aAAa,CAAC;qBACnG;iBACF;gBAED,UAAU;gBACV,IAAG,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE;oBACnC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC;iBAC9D;gBAED,IAAG,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,MAAM,EAAE;oBAC5B,sBAAsB;oBACtB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;iBACjC;YAGL,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;gBACN,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;YAC5C,CAAC,CAEA,CAAC;QACJ,CAAC;KAAA;CACF;;YAxIQ,iEAAc;YAFd,mDAAM;;AAiBF,cAAc;IAL1B,wDAAS,CAAC;QACT,QAAQ,EAAE,iBAAiB;QAC3B,gFAAsC;;KAEvC,CAAC;GACW,cAAc,CAyH1B;AAzH0B;;;;;;;;;;;;;;;;AClB3B,iEAAe,8CAA8C,2HAA2H,E;;;;;;;;;;;;;;;ACAxL,iEAAe,sJAAsJ,6BAA6B,GAAG,6DAA6D,qLAAqL,oCAAoC,q4BAAq4B,qBAAqB,oIAAoI,kBAAkB,0OAA0O,E","file":"src_app_points_add-friends_add-friends_module_ts.js","sourcesContent":["// declare module \"@capacitor/core\" {\n//   interface PluginRegistry {\n//     Contacts: ContactsPlugin;\n//   }\n// }\nexport var ContactType;\n(function (ContactType) {\n    ContactType[ContactType[\"Person\"] = 0] = \"Person\";\n    ContactType[ContactType[\"Organization\"] = 1] = \"Organization\";\n})(ContactType || (ContactType = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Contacts = registerPlugin('Contacts', {\n    web: () => import('./web').then(m => new m.ContactsPluginWeb()),\n});\nexport * from './definitions';\nexport { Contacts };\n//# sourceMappingURL=index.js.map","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AddFriendsPage } from './add-friends.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AddFriendsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AddFriendsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AddFriendsPageRoutingModule } from './add-friends-routing.module';\n\nimport { AddFriendsPage } from './add-friends.page';\n\nimport { TranslateModule } from '@ngx-translate/core';\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AddFriendsPageRoutingModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [AddFriendsPage]\n})\nexport class AddFriendsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { GeneralService } from '../../serv/general.service';\n\n/*\nimport { Plugins } from \"@capacitor/core\";\nconst  { Contacts } = Plugins;\n*/\nimport { isPlatform } from '@ionic/core';\n\nimport { Contacts } from \"@capacitor-community/contacts\";\n\n@Component({\n  selector: 'app-add-friends',\n  templateUrl: './add-friends.page.html',\n  styleUrls: ['./add-friends.page.scss'],\n})\nexport class AddFriendsPage implements OnInit {\n  skeleton = true;\n  skeletonNumbers;\n\n  selectedFriends=[];\n  contactsFound =[];\n  constructor(\n    public GeneralService:GeneralService,\n    private router: Router,\n  ) { \n    this.skeletonNumbers = Array(5).fill(0).map((x,i)=>i);\n    /*\n    this.contactsFound = [\n      {\n        displayName:'Ahmed',\n        phoneNumbers:[{value:\"010001115555\"}, {value:\"042022222222\"}],\n      },\n      {\n        displayName:'محمد سمير',\n        phoneNumbers:[{value:\"58758421\"}],\n      },\n      {\n        displayName:'Test LLL',\n        phoneNumbers:[{value:\"00011100011\"}],\n      },\n      {\n        displayName:'محمود سيد',\n        phoneNumbers:[{value:\"05435685\"}],\n      },\n      {\n        displayName:'خالد',\n        phoneNumbers:[{value:\"05435685\"}],\n      },\n      {\n        displayName:'Test LLL2',\n        phoneNumbers:[{value:\"00011100022\"}],\n      },\n    ];\n    */\n  }\n\n  ngOnInit() {\n    this.loadContacts();\n  }\n\n  async loadContacts(){\n    if(isPlatform(\"android\")){\n      let permission = await Contacts.getPermissions();\n      if(!permission.granted) {\n        this.GeneralService.presentAlert('There is no permission to use the contact list');\n        return;\n      }\n    }\n    Contacts.getContacts().then(result => {\n      this.contactsFound = result.contacts;\n      this.skeleton = false;\n    });\n  }\n\n  onSearchTerm(ev: CustomEvent) {\n    const val = ev.detail.value;\n    \n    this.contactsFound = this.contactsFound.filter(item => {\n      if(val.trim()){\n        const shouldShow = item.displayName && item.displayName.toLowerCase().indexOf(val.trim().toLowerCase()) > -1;\n        const shouldShowPhone = item.phoneNumbers && item.phoneNumbers.toString().indexOf(val.trim()) > -1;\n        item.hide = (shouldShow || shouldShowPhone) ? false : true ;\n      }\n      else {\n        item.hide = false;\n      }\n      return true;\n    });     \n    \n  }\n\n  selectFriend(e, data){\n\t\tif (e.detail.checked == true) {\n\t\t\t\n\t\t\tthis.selectedFriends.push(data);\n\t\t  } else {\n\t\t   let newArray = this.selectedFriends.filter(function(el) {\n\t\t\t return el.displayName !== data.displayName;\n\t\t  });\n\t\t   this.selectedFriends = newArray;\n\t\t }\n\n\t}\n\n\n  async startSendData() {\n    this.GeneralService.loadingPanel();\n    await this.GeneralService.api.generalGet('points_add_friends', {friends:this.selectedFriends}).then(\n      (data) => {\n        this.GeneralService.loadingPanel('close');\n        var moreMsg='';\n\n        if(data[\"data\"]?.errors) {\n          for (const err of data[\"data\"].errors) {\n            moreMsg = moreMsg + \"<p> \" + err.error + \" <span class='d-block'>\" + err.data_prev +'</span></p>';\n          }\n        } \n\n        //If msg !\n        if(data[\"data\"] && data[\"data\"].msg) {\n          this.GeneralService.presentAlert(data[\"data\"].msg + moreMsg);\n        }\n        \n        if(data[\"data\"].st == 'done') {\n          // go to previous page\n          this.router.navigate(['points'])\n        }\n\n\n    },\n    (err) => {\n      this.GeneralService.loadingPanel('close');\n    }\n\n    );\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZGQtZnJpZW5kcy5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n     <ion-button slot=\\\"end\\\" size=\\\"small\\\" (click)=\\\"startSendData()\\\" margin> <ion-icon name=\\\"add\\\"></ion-icon> {{ 'GENERAL.add' | translate }} {{selectedFriends.length ?'('+selectedFriends.length+')' : ''}}</ion-button>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"points\\\" routerDirection=\\\"backward\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{ 'P_TITLES.pointsAdd' | translate }}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-searchbar primary show-cancel=\\\"true\\\" placeholder=\\\"Search\\\" (ionChange)=\\\"onSearchTerm($event)\\\"></ion-searchbar>\\n\\n  <div *ngIf=\\\"skeleton\\\">\\n    <ion-list>\\n      <ion-item *ngFor=\\\"let number of skeletonNumbers\\\">\\n        <ion-thumbnail slot=\\\"start\\\">\\n          <ion-skeleton-text animated></ion-skeleton-text>\\n        </ion-thumbnail>\\n        <ion-label>\\n          <h3><ion-skeleton-text animated style=\\\"width: 50%\\\"></ion-skeleton-text></h3>\\n          <p><ion-skeleton-text animated style=\\\"width: 80%\\\"></ion-skeleton-text></p>\\n        </ion-label>\\n      </ion-item>\\n    </ion-list>\\n  </div>\\n\\n  <div class=\\\"dat-group\\\" *ngIf=\\\"contactsFound\\\">\\n    <ion-item-sliding *ngFor=\\\"let contact of contactsFound\\\">\\n      <ion-item [hidden]=\\\"contact.hide\\\">\\n        <ion-label>\\n        <span class=\\\"name\\\">{{contact.displayName}}</span>\\n        <p class=\\\"phone\\\" *ngIf=\\\"contact?.phoneNumbers\\\">\\n          <span *ngFor=\\\"let obj of contact?.phoneNumbers\\\">{{obj.value | json}}</span>\\n        </p>\\n        </ion-label>\\n        <ion-checkbox ng-init=\\\"ddddd='sdfsdf'\\\" (ionChange)=\\\"selectFriend($event, contact)\\\"></ion-checkbox>\\n      </ion-item>\\n    \\n    </ion-item-sliding>\\n  </div>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}